<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="da" style="font-size: 100%">
<head>
    <title>fcoo.dk - leaflet-bootstrap-marker - Demo</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta http-equiv='x-dns-prefetch-control' content='on'>

    <meta name='copyright' content='FCOO'>
    <meta name='owner' content='FCOO'>

    <link  href="bower_components.css" rel="stylesheet">
    <link  href="../src/leaflet-bootstrap-marker.css" rel="stylesheet">

    <!-- <link  href="fcoo-fontawesome.css" rel="stylesheet"> -->
    <link  href="css/all.css" rel="stylesheet">
    <style>
        html, body, #map {
            padding: 0; margin: 0; width:100%; height:100%;
            cursor: default !important;
        }
    </style>
</head>

<body>
    <div id="map" style="cursor: pointer; _width: 800px; _height: 600px"></div>

    <script src="bower_components.js"></script>

    <script src="../src/leaflet-bootstrap-marker-base.js"></script>
    <script src="../src/leaflet-bootstrap-marker-redcross.js"></script>
    <script src="../src/leaflet-bootstrap-marker-circle.js"></script>
    <script src="../src/leaflet-bootstrap-marker-icon.js"></script>
    <script src="../src/leaflet-bootstrap-marker-icon2.js"></script>


    <script src="../src/leaflet-map-ignoreNextEvent.js"></script>

    <script>

//    $.FONTAWESOME_PREFIX = 'far';

    window.bsIsTouch = false;
    window.bsIsTouch = (window.location.search =='?touch');


    i18next.init();
    i18next.changeLanguage('en');

    var map = L.map('map', {

    }).setView([56.2, 11.5], 6);

    L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxZoom: 18,
        attribution: '&copy; <a href="http://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors</a>'
    }).addTo(map);

    L.bsMarkerCircle([55, 12],{
        size: 'sm',
        draggable: true,
        useTouchSize: true
    }).addTo(map);


    //**************************************
    var tooltip = [
            $('<div/>')._bsAddHtml({icon:'fa-home', text:{da:'Dansk', en:'Eng'}}),
            $('<div/>')._bsAddHtml({icon:'fa-home', text:{da:'Lang Dansk', en:'LongEng'}})
        ];
//HER    var allSize = false,
    var allSize = true,
        size = allSize ? 'xs' : 'xl',
        markerList = [
//HER{constructor: L.bsMarkerCircle, options: {
//HER    iconClass: 'fa-home',
//HER}},


            {constructor: L.bsMarkerIcon, options: {
                iconClass: 'fa-arrow-up',
                noFill   : true,
            }},

            {constructor: L.bsMarkerIcon, options: {
                iconClass: 'fa-caret-up',
                scaleY   : 50,
                scaleX   : 60
            }},
            {constructor: L.bsMarkerIcon, options: {
                iconClass: 'fa-octagon', //'fa-rectangle-wide',
                innerIconClass: 'fa-square',
            }},

            {constructor: L.bsMarkerIcon, options: {
                iconClass: 'fa-badge',
                innerIconClass: 'fa-square',
            }},

            {constructor: L.bsMarkerIcon, options: {
                iconClass: 'fa-certificate',
                innerIconClass: 'fa-square',
            }},

            {constructor: L.bsMarkerStandard, options: {
                iconClass: 'fa-home',
            }},


            {constructor: L.bsMarkerIcon, options: {
                iconClass: 'fa-fighter-jet',
                scale: 80,
                directionOffset: -90
            }},
            {constructor: L.bsMarkerIcon, options: {
                iconClass: 'fa-map-pin',
                iconAnchor : {width: 0.5, height: 1},
                popupAnchor: {width: 0,   height: -0.5  },
                rotationOrigin: 'center bottom',
            }},
            {constructor: L.bsMarkerIcon, options: {
                iconClass: 'fa-arrow-alt-up'

            }},

            {constructor: L.bsMarkerCircle, options: {
                iconClass: 'fa-square',
                scaleInner: 80,
            }},

            {constructor: L.bsMarkerCircle, options: {
                iconClass: 'fa-fighter-jet',
                rotateInner: -90,
                scaleInner: 40,
                scale: 150,
                round: false

            }},

            {constructor: L.bsMarkerRedCross, options: {
                addPopup: true
            }},


        ],

        mfIndex = 0;

    function addMarker( latlng){
        var options = $.extend({}, markerList[mfIndex].options, {
                size: size,
                shadow: false,
                draggable: true,
                colorName    : 'green',
                thickBorder : false,
                borderColorName: 'red', //'black',

//                puls: true,
                transparent: true,
                hover: true,

                _tooltip: tooltip,
                _tooltipPermanent: true,
                tooltipHideWhenDragging: true,
                tooltipHideWhenPopupOpen: true,
                shadowWhenPopupOpen: true
            }),


            marker = markerList[mfIndex].constructor(latlng, options);
//HER            marker.setColor('yellow');
//HER            marker.setBorderColor('green');
//HER            marker.setDirection(45);

            marker.addTo( map );

            marker.on('click', function(){
                //this._tooltip.setContent('<p style="background-color:red">NY'+Math.round(Math.random()*10000)+'</p>');

                this.setColor('orange');
                this.setBorderColor('blue');
                this.setDeltaDirection( 22.5 );

                this.toggleOption('puls');
                this.setNumber('12');

                },
                marker
            );

//HER            if (options.addPopup)

                marker.bindPopup({
                    width: 234,
                    closeButton: false,
                    header: {
                        icon: marker.asIcon(),
                        text: 'Davs',
                    },
                    fixable: true,
                    _icons: {
                        back: { onClick: function(){ console.log('BACK!'); } },
                        forward: { onClick: function(){ console.log('FORWARD!'); } }
                    },
                    buttons: [
                    {
                        icon: 'fa-map',
                        text:'Inds.',
                        onClick: function(){
                            marker._popup.changeContent({
                                content: 'NY'+Math.round(Math.random()*10000),
                                extended: {
                                    content: 'NY EXTENDED'+Math.round(Math.random()*10000)
                                }
                            });
                        }
                    },
                    {
                        icon:'fa-square',
                        text:{da:'Skift', en:'Change'},
                        onClick: function(){
                            marker._popup.setContent({
                                closeButton: true,
                                header:'Davs igen',
                                fixable: true,
                                content: 'NIELS:'+Math.round(Math.random()*10000),
                                _extended: {
                                    content: 'Skide godt<br>Skide godt<br>Skide godt<br>Skide godt<br>Skide godt<br>Skide godt<br>'
                                }
                            });
                        }
                    }],
                    content: {icon: 'fa-square', text: 'Tekst_og_ikon_ord_ord_ord_ord_ord_ord_ord_ord_ord_ord_ord_ord_ord_ord_ord_ord_ord_ord_ord_ord_ord_ord_ord_ord_ord_ord_ord_ord_ord_ord_ord_ord_ord_ord_ord_ord_ord_ord_ord_ord_ord_ord_ord_ord_ord_ord_ord_ord_ord_ord_ord_ord'}, scroll: true,

                    extended: {
                        content: ['<p>Dette er en p</p>', 'Jeg vil i span', 'Skide godt<br>Skide godt<br>Skide godt<br>Skide godt<br>Skide godt<br>Skide godt<br>']
                    }
                });




            switch (size){
                case 'xs':  size = 'sm'; break;
                case 'sm':  size = 'nl'; break;
                case 'nl':  size = 'lg'; break;
                case 'lg':  size = 'xl';break;
                case 'xl':  size = allSize ? 'xs' : 'xl';
                            mfIndex = (mfIndex+1) % markerList.length;
                            break;
            }


    }


    map.on('click', function( mouseEvent ){ addMarker( mouseEvent.latlng ); });


    </script>
</body>
</html>
